(function(){"use strict";var App;App=angular.module("App",["ngAnimate","ngTouch","ngSanitize","ngRoute","App.filters","App.services","App.directives","App.controllers","App.templates","google-maps","ui.bootstrap"]).value("version","© 2001-2014 nhadat.com").value("Domain","http://nhadat.com").config(["$routeProvider","$locationProvider","$httpProvider",function($routeProvider,$locationProvider,$httpProvider){return $routeProvider.when("/login.html",{templateUrl:"html/login.html"}),$routeProvider.when("/update.html",{templateUrl:"html/update.html"}),$routeProvider.when("/newpassword.html",{templateUrl:"html/newpassword.html"}),$routeProvider.when("/account.html",{templateUrl:"html/account.html"}),$routeProvider.when("/diadanh.html",{templateUrl:"html/group.html"}),$routeProvider.when("/agent.html",{templateUrl:"html/agent.html"}),$routeProvider.when("/search.html",{templateUrl:"html/search.html"}),$routeProvider.when("/t/:tagId",{templateUrl:"html/tag.html"}),$routeProvider.when("/p/:postId*",{templateUrl:"html/post.html"}),$routeProvider.when("/c/:commentId*",{templateUrl:"html/comment.html"}),$routeProvider.when("/profile/:profileId",{templateUrl:"html/profile.html"}),$routeProvider.when("/map/:mapId*",{templateUrl:"html/map.html"}),$routeProvider.when("/contact/:contactId",{templateUrl:"html/contact.html"}),$routeProvider.when("/sale.html",{templateUrl:"html/sale.html"}),$routeProvider.when("/share.html",{templateUrl:"html/share.html"}),$routeProvider.when("/",{templateUrl:"html/welcome.html",controller:"WelcomeCtrl"}),$routeProvider.otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!1),$httpProvider.defaults.headers.common={"X-Requested-With":"XMLHttpRequest"}}]).config(["$httpProvider",function($httpProvider){var logsOutUserOn401;return logsOutUserOn401=["$location","$q","Session","Flash",function($location,$q,Session,Flash){var error,success;return success=function(response){return response},error=function(response){return 401===response.status&&(Session.unset("authenticated"),$location.path("/login.html"),Flash.show({type:"error",msg:response.data.flash})),$q.reject(response)},function(promise){return promise.then(success,error)}}],$httpProvider.responseInterceptors.push(logsOutUserOn401)}]).config(["$compileProvider",function($compileProvider){return $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|mailto|tel|sms|file):/)}]).run(["$rootScope","$location","Auth","Flash",function($rootScope,$location,Auth,Flash){var requireAuth,requirePhone;return requireAuth=["/diadanh.html","/sale.html","/share.html","/update.html","/account.html"],requirePhone=["/diadanh.html","/sale.html"],$rootScope.isPath="",$rootScope.$on("$routeChangeStart",function(){$rootScope.isLogin=Auth.isLoggedIn(),$rootScope.User=Auth.user(),$rootScope.isMenu=!1,_(requireAuth).contains($location.path())&&!$rootScope.isLogin&&($rootScope.isPath=$location.path(),$location.path("/login.html"),Flash.show({type:"info",msg:"Mục này cần phải đăng nhập để tiếp tục."})),!_(requirePhone).contains($location.path())||$rootScope.User.phone&&$rootScope.User.first_name||($location.path("/update.html"),Flash.show({type:"info",msg:"Để rao đăng bạn cần phải cập nhập tên và số điện thoại."}))})}])}).call(this),function(){angular.module("App.services",[]).factory("SearchService",["$http","Domain",function($http,Domain){var SearchService;return SearchService=function(search){this.items=[],this.busy=!1,this.page=1,this.end=!1,this.search=search||[],this.nextPage()},SearchService.prototype.nextPage=function(){this.end||this.busy||(this.busy=!0,this.end||$http.post(Domain+"/api/search",{page:this.page,retina:window.devicePixelRatio,search:this.search}).success(function(data){var i;if(data.length>0){for(i=0;i<data.length;)this.items.push(data[i]),i++;this.page++}else this.end=!0;this.busy=!1}.bind(this)))},SearchService}]).factory("TagService",["$http","Domain",function($http,Domain){var TagService;return TagService=function(search){this.items=[],this.busy=!1,this.page=1,this.end=!1,this.search=search||"",this.nextPage()},TagService.prototype.nextPage=function(){this.end||this.busy||(this.busy=!0,!this.end&&this.search.length&&$http.post(Domain+"/api/search/tag",{page:this.page,retina:window.devicePixelRatio,keyword:this.search}).success(function(data){var i;if(data.length>0){for(i=0;i<data.length;)this.items.push(data[i]),i++;this.page++}else this.end=!0;this.busy=!1}.bind(this)))},TagService}]).factory("Flash",["$rootScope","$timeout",function($rootScope,$timeout){return{show:function(message){$rootScope.flash=message,$timeout(function(){$rootScope.flash=""},9e4)},clear:function(){$rootScope.flash=""}}}]).factory("Session",function(){return{get:function(key){return localStorage.getItem(key)},set:function(key,val){return localStorage.setItem(key,val)},unset:function(key){return localStorage.removeItem(key)}}}).factory("Auth",["$http","$sanitize","Session","Flash","Domain",function($http,$sanitize,Session,Flash,Domain){var cacheGuest,sanitizeCredentials;return cacheGuest=function(ssid){Session.set("guest",ssid)},sanitizeCredentials=function(form){return{user:$sanitize(form.user),password:$sanitize(form.password)}},{login:function(form){return $http.post(Domain+"/api/user/login",sanitizeCredentials(form)).success(function(data){Session.set("user",JSON.stringify(data.user)),Flash.show({type:"success",msg:data.flash})}).error(function(data){Flash.show({type:"danger",msg:data.flash})})},logout:function(){return $http.get(Domain+"/api/user/logout").success(function(){Session.unset("user"),Flash.show({type:"success",msg:"Bạn đã thoát ra an toàn."})})},update:function(data){Session.set("user",JSON.stringify(data))},user:function(){return JSON.parse(Session.get("user"))},sendmail:function(credentials){return $http.post(Domain+"/api/user/sendmail",sanitizeCredentials(credentials)).success(function(data){Flash.show({type:"success",msg:data.flash})}).error(function(data){Flash.show({type:"danger",msg:data.flash})})},guest:function(){return $http.get(Domain+"/api/user/guest").success(function(data){Session.set("guest",data.user)})},isGuest:function(){return Session.get("guest")},isLoggedIn:function(){return Session.get("user")}}}])}.call(this),function(){angular.module("App.filters",[]).filter("unsafe",["$sce",function($sce){return function(val){return $sce.trustAsHtml(val)}}]).filter("fixbr",function(){return function(arg){return arg?arg.replace(/&lt;br(.*?)\/&gt;/g,"<br />"):void 0}}).filter("thumb",function(){return function(arg){var array,re;return array=["jpg","jpeg","png","gif","bmp"],re=/(?:\.([^.]+))?$/,array.indexOf(re.exec(arg)[1])>-1?arg:"attach.png"}}).filter("bbcode",function(){return function(input){var bbcode_in,bbcode_out,i;for(bbcode_in=[/\[b\](.*?)\[\/b\]/g,/\[i\](.*?)\[\/i\]/g,/\[u\](.*?)\[\/u\]/g,/\[3d\](.*?)\[\/3d\]/g],bbcode_out=["<strong>$1</strong>","<em>$1</em>",'<span style="text-decoration: underline;">$1</span>','<iframe src="$1" width="100%" class="frame" marginheight="0" frameborder="0" allowfullscreen></iframe>'],i=0;i<bbcode_in.length;)input=input.replace(bbcode_in[i],bbcode_out[i]),i++;return input}}).filter("vndong",function(){return function(input){var i,lv,s;if(s=parseInt(input)){for(s=parseInt(input),lv=new Array(" đồng"," nghìn đồng"," triệu đồng"," tỷ đồng"," nghìn tỷ đồng"),i=0;s>=1e3;)s/=1e3,i++;return i>=lv.length?"Số tiền quá lớn":s?(s=Math.round(100*s)/100,"~ "+s.toString().replace(".",",")+lv[i]):input}return"Số tiền không hợp lệ"}}).filter("pricify",function(){return function(input){var x;return x=parseInt(input),1e3>x?x.toString():1e5>x?(x=Math.round(x/1e3),x.toString()+".000"):1e6>x?(x=Math.round(x/1e6*100)/100,x.toString()+"<small>TR</small>"):1e9>x?(x=Math.round(x/1e6*100)/100,x.toString()+"<small>TR</small>"):(x=Math.round(x/1e9*100)/100,x.toString()+"<small>TỶ</small>")}}).filter("rentify",function(){return function(input){var x;return x=parseInt(input),1e3>x?x.toString():1e5>x?(x=Math.round(x/1e3),x.toString()+".000/th"):1e6>x?(x=Math.round(x/1e6*100)/100,x.toString()+"<small>TR</small>/th"):1e9>x?(x=Math.round(x/1e6*100)/100,x.toString()+"<small>TR</small>/th"):(x=Math.round(x/1e9*100)/100,x.toString()+"<small>TỶ</small>/th")}}).filter("characters",function(){return function(input,chars,breakOnWord){var lastspace;if(isNaN(chars))return input;if(0>=chars)return"";if(input&&input.length>=chars){if(input=input.substring(0,chars),breakOnWord)for(;" "===input.charAt(input.length-1);)input=input.substr(0,input.length-1);else lastspace=input.lastIndexOf(" "),-1!==lastspace&&(input=input.substr(0,lastspace));return input+"..."}return input}}).filter("words",function(){return function(input,words){var inputWords;return isNaN(words)?input:0>=words?"":(input&&(inputWords=input.split(/\s+/),inputWords.length>words&&(input=inputWords.slice(0,words).join(" ")+"...")),input)}}).filter("tel",function(){return function(tel){var number,prefix,provider,value;if(!tel)return"";if(value=tel.toString().trim().replace(/[^\d]/g,""),value.match(/[^0-9]/))return tel;switch(provider=void 0,prefix=void 0,number=void 0,value.length){case 10:provider="",prefix=value.slice(0,3),number=value.slice(3);break;case 11:"84"===value.slice(0,2)?(provider="+84",prefix=value.slice(0,5).slice(2),number=value.slice(5)):(provider="",prefix=value.slice(0,4),number=value.slice(4));break;case 12:provider="+"+value.slice(0,2),prefix=value.slice(0,5).slice(2),number=value.slice(5);break;default:return tel}return number=number.slice(0,3)+"-"+number.slice(3),(provider+" ("+prefix+") "+number).trim()}})}.call(this),function(){angular.module("App.directives",[]).directive("appVersion",["version",function(version){return function(scope,elm){elm.text(version)}}]).directive("scrolltop",function(){return{restrict:"EM",template:'<a href="#" class="scroll-top"><i class="icon-chevron-up"></i></a>'}}).directive("mainnav",["$location","$rootScope","Auth",function($location,$rootScope,Auth){return{restrict:"AEM",templateUrl:"html/nav.html",controller:["$scope","$element","$attrs",function($scope){return $scope.logout=function(){Auth.logout().success(function(){$scope.isLogin=!1,$location.path("/")})},$scope.navClass=function(page){var currentRoute;return currentRoute=$location.path().substring(1)||"",page===currentRoute?"active":""}}]}}]).directive("slider",function(){return{restrict:"EM",templateUrl:"html/slider.html"}}).directive("comments",function(){return{restrict:"E",templateUrl:"html/comments.html"}}).directive("agent",function(){return{restrict:"EM",templateUrl:"html/agents.html"}}).directive("notice",function(){return{restrict:"EM",templateUrl:"html/notice.html"}}).directive("classifieds",function(){return{restrict:"EM",templateUrl:"html/classifieds.html"}}).directive("follows",function(){return{restrict:"EM",templateUrl:"html/follows.html"}}).directive("flash",function(){return{restrict:"EM",templateUrl:"html/flash.html"}}).directive("mainpage",["$rootScope",function(){return{restrict:"EM",template:'<div id="mainpage" ng-view ng-click="isMenu = false"></div>'}}]).directive("infiniteScroll",["$rootScope","$window","$timeout",function($rootScope,$window,$timeout){return{link:function(scope,elem,attrs){var checkWhenEnabled,handler,scrollDistance,scrollEnabled;return checkWhenEnabled=void 0,handler=void 0,scrollDistance=void 0,scrollEnabled=void 0,$window=angular.element($window),scrollDistance=0,null!=attrs.infiniteScrollDistance&&scope.$watch(attrs.infiniteScrollDistance,function(value){return scrollDistance=parseInt(value,10)}),scrollEnabled=!0,checkWhenEnabled=!1,null!=attrs.infiniteScrollDisabled&&scope.$watch(attrs.infiniteScrollDisabled,function(value){return scrollEnabled=!value,scrollEnabled&&checkWhenEnabled?(checkWhenEnabled=!1,handler()):void 0}),handler=function(){var elementBottom,remaining,shouldScroll,windowBottom;return elementBottom=void 0,remaining=void 0,shouldScroll=void 0,windowBottom=void 0,windowBottom=$window.height()+$window.scrollTop(),elementBottom=elem.offset().top+elem.height(),remaining=elementBottom-windowBottom,shouldScroll=remaining<=$window.height()*scrollDistance,shouldScroll&&scrollEnabled?$rootScope.$$phase?scope.$eval(attrs.infiniteScroll):scope.$apply(attrs.infiniteScroll):shouldScroll?checkWhenEnabled=!0:void 0},$window.on("scroll",handler),scope.$on("$destroy",function(){return $window.off("scroll",handler)}),$timeout(function(){return attrs.infiniteScrollImmediateCheck?scope.$eval(attrs.infiniteScrollImmediateCheck)?handler():void 0:handler()},0)}}}]).directive("goClick",["$location",function($location){return function(scope,element,attrs){var path;path=void 0,attrs.$observe("goClick",function(val){path=val}),element.bind("click",function(){scope.$apply(function(){$location.path(path)})})}}]).directive("remove",["$http","$location","Domain",function($http,$location,Domain){return function(scope,element,attrs){element.bind("click",function(){confirm("Bạn chắc chắn muốn xóa tin này?")&&$http.post(Domain+"/api/message/destroy",{id:attrs.remove}).success(function(){alert("Đã xóa thành công."),scope.$apply(function(){$location.path("/index.html")})}).error(function(data,status){403===status&&alert("Bạn phải đăng nhập để sử dụng chức năng này."),404===status&&alert("Nội dung không tìm thấy, xóa tin thất bại.")})})}}]).directive("report",["$http","Domain",function(){return function(scope,element){element.bind("click",function(){alert("Cám ơn bạn đã báo tin.")})}}]).directive("like",["$http","Domain",function($http,Domain){return function(scope,element,attrs){element.bind("click",function(){$http.post(Domain+"/api/like/create",{like:attrs.like}).success(function(data){element.html(data.like?'<a class="active"><i class="icon-thumbs-up"></i></a> '+data.total:'<a><i class="icon-thumbs-up"></i></a> '+data.total)}).error(function(data,status){403===status&&alert("Bạn phải đăng nhập để sử dụng chức năng này.")})})}}]).directive("follow",["$http","Domain",function($http,Domain){return function(scope,element,attrs){element.bind("click",function(){$http.post(Domain+"/api/follow/create",{follow:attrs.follow}).success(function(data){element.html('<a class="active"><i class="icon-thumbs-up"></i></a> '+data.total+" theo dõi")}).error(function(data,status){403===status&&alert("Bạn phải đăng nhập để sử dụng chức năng này.")})})}}]).directive("autoGrow",function(){return function(scope,element){var $shadow,minHeight,paddingLeft,paddingRight,update;minHeight=element[0].offsetHeight,paddingLeft=element.css("paddingLeft"),paddingRight=element.css("paddingRight"),$shadow=angular.element("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:element[0].offsetWidth-parseInt(paddingLeft||0)-parseInt(paddingRight||0),fontSize:element.css("fontSize"),fontFamily:element.css("fontFamily"),lineHeight:element.css("lineHeight"),resize:"none"}),angular.element(document.body).append($shadow),update=function(){var times,val;times=function(string,number){var i,r;for(i=0,r="";number>i;)r+=string,i++;return r},val=element.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/\s{2,}/g,function(space){return times("&nbsp;",space.length-1)+" "}),$shadow.html(val),element.css("height",Math.max($shadow[0].offsetHeight+10,minHeight)+"px")},element.bind("keyup keydown keypress change",update),update()}}).directive("uploader",function(){return{restrict:"E",scope:{action:"@"},controller:["$scope","Auth","Session","Domain",function($scope,Auth,Session,Domain){return $scope.progress=0,$scope.login=Auth.isLoggedIn(),$scope.images=[],Session.get("files")&&($scope.images=JSON.parse(Session.get("files"))),$scope.remove=function(index){$scope.images.splice(index,1),Session.set("files",JSON.stringify($scope.images))},$scope.sendFile=function(el){var $form;return $form=$(el).parents("form"),""===$(el).val()?!1:($form.attr("action",Domain+$scope.action),$scope.$apply(function(){$scope.progress=0}),void $form.ajaxSubmit({type:"POST",uploadProgress:function(event,position,total,percentComplete){$scope.$apply(function(){$scope.progress=percentComplete})},error:function(){$form.removeAttr("action")},success:function(data){var ar,filename;ar=$(el).val().split("\\"),filename=ar[ar.length-1],$form.removeAttr("action"),$scope.$apply(function(){var i;if(data.images.length>0)for(i=0;i<data.images.length;)$scope.images.push(data.images[i]),i++;Session.set("files",JSON.stringify($scope.images))})}}))}}],link:function(scope,elem){elem.find(".upload").click(function(){elem.find('input[type="file"]').click()})},replace:!1,templateUrl:"html/uploader.html"}}).directive("debug",function(){return{restrict:"E",scope:{expression:"=val"},template:"<pre>{{debug(expression)}}</pre>",link:function(scope){scope.debug=function(exp){return angular.toJson(exp,!0)}}}}).directive("imgmap",function(){return{restrict:"A",link:function(scope,element,attrs){scope.$watch(attrs.imgmap,function(newValue){newValue.latitude>0&&element.html('<img class="img-responsive" src="//maps.googleapis.com/maps/api/staticmap?center='+newValue.latitude+","+newValue.longitude+"&markers="+newValue.latitude+","+newValue.longitude+'&zoom=15&size=640x320&sensor=false" alt="" />')})}}}).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,require:"carousel",templateUrl:"html/carousel.html",scope:{slides:"=",rent:"=",price:"="},controller:["$scope",function($scope){return $scope.direction="left",$scope.currentIndex=0,$scope.setSlide=function(index){$scope.currentIndex=index},$scope.isSlide=function(index){return $scope.currentIndex===index},$scope.prev=function(){$scope.direction="left",$scope.currentIndex=$scope.currentIndex<$scope.slides.length-1?++$scope.currentIndex:0},$scope.next=function(){$scope.direction="right",$scope.currentIndex=$scope.currentIndex>0?--$scope.currentIndex:$scope.slides.length-1}}]}}]).directive("dropdownToggle",["$document","$location",function($document){var closeMenu,openElement;return openElement=null,closeMenu=angular.noop,{restrict:"CA",link:function(scope,element){scope.$watch("$location.path",function(){closeMenu()}),element.parent().bind("click",function(){closeMenu()}),element.bind("click",function(event){var elementWasOpen;elementWasOpen=element===openElement,event.preventDefault(),event.stopPropagation(),openElement&&closeMenu(),elementWasOpen||element.hasClass("disabled")||element.prop("disabled")||(element.parent().addClass("open"),openElement=element,closeMenu=function(event){event&&(event.preventDefault(),event.stopPropagation()),$document.unbind("click",closeMenu),element.parent().removeClass("open"),closeMenu=angular.noop,openElement=null},$document.bind("click",closeMenu))})}}}]).directive("lazyBackground",["$document","$parse",function($document,$parse){return{restrict:"A",link:function(scope,element,attrs){var bgModel,loader,setLoading;setLoading=function(elm){loader&&(elm.html(""),elm.append(loader),elm.css({"background-image":null}))},loader=null,angular.isDefined(attrs.lazyLoader)&&(loader=angular.element($document[0].querySelector(attrs.lazyLoader)).clone()),bgModel=$parse(attrs.lazyBackground),scope.$watch(bgModel,function(){var img,src;setLoading(element),src=bgModel(scope),img=$document[0].createElement("img"),img.onload=function(){loader&&loader.remove(),angular.isDefined(attrs.lazyLoadingClass)&&element.removeClass(attrs.lazyLoadingClass),angular.isDefined(attrs.lazyLoadedClass)&&element.addClass(attrs.lazyLoadedClass),element.css({"background-image":"url("+this.src+")"})},img.onerror=function(){},img.src=src})}}}]).directive("tiAutosize",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){var THRESHOLD,resize,span;THRESHOLD=3,span=void 0,resize=void 0,span=angular.element('<span class="input"></span>'),span.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),element.parent().append(span),resize=function(originalValue){var value,width;return value=originalValue,width=void 0,angular.isString(value)&&0===value.length&&(value=attrs.placeholder),value&&(span.text(value),span.css("display",""),width=span.prop("offsetWidth"),span.css("display","none")),element.css("width",width?width+THRESHOLD+"px":"213px"),originalValue},ctrl.$parsers.unshift(resize),ctrl.$formatters.unshift(resize),attrs.$observe("placeholder",function(value){ctrl.$modelValue||resize(value)})}}})}.call(this),function(){angular.module("App.controllers",[]).controller("ShareCtrl",["$scope","$http","$timeout","$location","$rootScope","Session","Flash","Domain",function($scope,$http,$timeout,$location,$rootScope,Session,Flash,Domain){var toggle;return $scope.steps=["one","two"],$scope.step=0,$scope.page=0,$scope.form={},$scope.results=[],$scope.tags=[],$scope.login=$rootScope.isLogin,$scope.isFirstStep=function(){return 0===$scope.step},$scope.isLastStep=function(){return $scope.step===$scope.steps.length-1},$scope.CurrentStep=function(){return $scope.steps[$scope.step]},$scope.Label=function(){return $scope.isLastStep()?"Đăng":"Tiếp theo"},$scope.Previous=function(){$scope.step-=$scope.isFirstStep()?0:1},$scope.Next=function(){$scope.isLastStep()?$scope.submit():($scope.step+=1,1===$scope.step&&$scope.Tags())},$scope.submit=function(){"undefined"!=typeof $scope.form.message?$rootScope.isLogin?($scope.form.images=JSON.parse(Session.get("files")),$http.post(Domain+"/api/message/create",$scope.form).success(function(data){Flash.show({type:"success",msg:"Đăng tin thành công."}),$timeout(function(){$location.path("/c/"+data.message.id+".html")},500),Session.unset("files")}).error(function(data){Flash.show({type:"danger",msg:data.flash})})):alert("Bạn chưa đăng nhập, vui lòng đăng nhập."):($scope.step=0,Flash.show({type:"danger",msg:"Bạn vui lòng nhập nội dung để chia sẻ."}))},$scope.Tags=function(){var k;"undefined"!=typeof $scope.form.message&&(k=$scope.form.message,$scope.page+=1,k.length>3&&$http.post(Domain+"/api/message/tags",{content:k,group:!0,page:$scope.page}).success(function(data){$scope.tags=data.tags}))},$scope.toggle=toggle=function(k){var idx;idx=$scope.form.tag.indexOf(k),idx>-1?$scope.form.tag.splice(idx,1):$scope.form.tag.push(k)}}]).controller("SaleCtrl",["$scope","$timeout","$log","$http","$location","$rootScope","Flash","Session","Domain",function($scope,$timeout,$log,$http,$location,$rootScope,Flash,Session,Domain){var toggle;return $scope.login=$rootScope.isLogin,$scope.steps=["one","two","three","four","five","six"],$scope.step=0,$scope.page=0,$scope.busy=!1,$scope.form={},$scope.results=[],$scope.tags=[],$scope.isFirstStep=function(){return 0===$scope.step},$scope.isLastStep=function(){return $scope.step===$scope.steps.length-1},$scope.CurrentStep=function(){return $scope.steps[$scope.step]},$scope.Label=function(){return $scope.isLastStep()?"Đăng tin":"Tiếp theo"},$scope.Previous=function(){$scope.step-=$scope.isFirstStep()?0:1},$scope.Next=function(){$scope.isLastStep()?$scope.submit():($scope.step+=1,1===$scope.step&&($scope.Tags(),$scope.form.images=JSON.parse(Session.get("files"))))},$scope.center={latitude:10.823099,longitude:106.629664},$scope.zoom=15,$scope.markers=[],$scope.markerLat=null,$scope.markerLng=null,$scope.addMarker=function(){$scope.markers.push({latitude:parseFloat($scope.markerLat),longitude:parseFloat($scope.markerLng)}),$scope.markerLat=null,$scope.markerLng=null},$scope.geolocationAvailable=navigator.geolocation?!0:!1,$scope.checkin=function(){$scope.geolocationAvailable&&navigator.geolocation.getCurrentPosition(function(position){$scope.center={latitude:position.coords.latitude,longitude:position.coords.longitude},$scope.position={coords:$scope.center},$scope.markers=[],$scope.markers.push($scope.center),$scope.markerLat=null,$scope.markerLng=null,$scope.$apply()},function(){})},$scope.gmap=function(k){var i;if($scope.center={latitude:k.map[0],longitude:k.map[1]},$scope.form.local=$scope.form.local1=k.local,k.tag.length>0)for(i=0;i<k.tag.length;)$scope.form.tag.push(k.tag[i]),i++;k.check&&($scope.markers=[],$scope.markers.push($scope.center))},$scope.Tags=function(){var k;"undefined"!=typeof $scope.form.message&&(k=$scope.form.message,$scope.page+=1,k.length>3&&$http.post(Domain+"/api/message/tags",{content:k,page:$scope.page}).success(function(data){var i;if(data.tags.length>0)for(i=0;i<data.tags.length;)$scope.tags.push(data.tags[i]),i++;data.price&&!$scope.form.price&&($scope.form.price=data.price)}))},$scope.toggle=toggle=function(k){var idx;idx=$scope.form.tag.indexOf(k),idx>-1?$scope.form.tag.splice(idx,1):$scope.form.tag.push(k)},$scope.suggests=function(){var k;"undefined"!=typeof $scope.form.local1&&(k=$scope.form.local1,!$scope.busy&&k.length>1?($scope.busy=!0,$http.post(Domain+"/api/address",{address:k}).success(function(data){$scope.results=data.results,$scope.busy=!1}).error(function(){$scope.busy=!1})):$scope.results=[])},$scope.capslock=function(s){var c,i;for(c=0,i=0;i<s.length;)s[i].charCodeAt(s[i])>=65&&s[i].charCodeAt(s[i])<=90&&c++,i++;return c/s.length*100<15},$scope.submit=function(){var message;$scope.markers.length&&($scope.form.map=$scope.markers[0].latitude+", "+$scope.markers[0].longitude),"undefined"!=typeof $scope.form.message&&$scope.form.message.length>=20?(message=$scope.form.message,$scope.capslock(message)?$http.post(Domain+"/api/message/create",$scope.form).success(function(data){Flash.show({type:"success",msg:"Bạn đã đăng tin thành công."}),$timeout(function(){$location.path("/p/"+data.message.id+".html")},500),Session.unset("files")}).error(function(data){$scope.step=0,Flash.show({type:"danger",msg:data.flash})}):(Flash.show({type:"danger",msg:"Nội dung quá nhiều ký tự viết hoa."}),$scope.step=0)):(Flash.show({type:"danger",msg:"Nội dung quá ngắn, ít nhất 20 ký tự."}),$scope.step=0)}}]).controller("WelcomeCtrl",["$scope",function(){}]).controller("GroupCtrl",["$scope","$timeout","$log","$http","$location","$rootScope","Flash","Domain",function($scope,$timeout,$log,$http,$location,$rootScope,Flash,Domain){var toggle;return $scope.login=$rootScope.isLogin,$scope.steps=["one","two","three","four","five","six","seven"],$scope.step=0,$scope.form={},$scope.results=[],$scope.tags=[],$scope.isFirstStep=function(){return 0===$scope.step},$scope.isLastStep=function(){return $scope.step===$scope.steps.length-1},$scope.CurrentStep=function(){return $scope.steps[$scope.step]},$scope.Label=function(){return $scope.isLastStep()?"Tạo địa danh":"Tiếp theo"},$scope.Previous=function(){$scope.step-=$scope.isFirstStep()?0:1},$scope.Next=function(){$scope.isLastStep()?$scope.submit():(1===$scope.step&&$scope.Exist(),$scope.step+=1)},$scope.center={latitude:10.823099,longitude:106.629664},$scope.zoom=15,$scope.markers=[],$scope.markerLat=null,$scope.markerLng=null,$scope.addMarker=function(){$scope.markers.push({latitude:parseFloat($scope.markerLat),longitude:parseFloat($scope.markerLng)}),$scope.markerLat=null,$scope.markerLng=null},$scope.geolocationAvailable=navigator.geolocation?!0:!1,$scope.checkin=function(){$scope.geolocationAvailable&&navigator.geolocation.getCurrentPosition(function(position){$scope.center={latitude:position.coords.latitude,longitude:position.coords.longitude},$scope.position={coords:$scope.center},$scope.markers=[],$scope.markers.push($scope.center),$scope.$apply()},function(){})},$scope.gmap=function(k){$scope.center={latitude:k.map[0],longitude:k.map[1]},$scope.form.local=$scope.form.local1=k.local},$scope.Tags=function(keywords){return $http.post(Domain+"/api/message/tags",{content:keywords}).success(function(data){$scope.tags=data.tags})},$scope.Exist=function(){return $http.post(Domain+"/api/group/tags",{keyword:$scope.form.name}).success(function(data){$scope.items=data.results,$scope.form.subdomain=data.slug,$scope.Domain()})},$scope.Domain=function(){"undefined"!=typeof $scope.form.subdomain&&$scope.form.subdomain.length>2?$http.post(Domain+"/api/group/domain",{domain:$scope.form.subdomain}).success(function(data){$scope.success=0===data.results.length?!0:!1}):$scope.success=!1},$scope.toggle=toggle=function(k){var idx;idx=$scope.form.tag.indexOf(k),idx>-1?$scope.form.tag.splice(idx,1):$scope.form.tag.push(k)},$scope.suggests=function(){var k;"undefined"!=typeof $scope.form.local1&&(k=$scope.form.local1,!$scope.busy&&k.length>1?($scope.busy=!0,$http.post(Domain+"/api/address",{address:k,group:!0}).success(function(data){$scope.results=data.results,$scope.busy=!1}).error(function(){$scope.busy=!1})):$scope.results=[])},$scope.submit=function(){$scope.markers.length&&($scope.form.map=$scope.markers[0].latitude+", "+$scope.markers[0].longitude),"undefined"!=typeof $scope.form.map&&"undefined"!=typeof $scope.form.local?$http.post(Domain+"/api/group/create",$scope.form).success(function(data){Flash.show({type:"success",msg:"Bạn đã tạo địa danh thành công."}),$timeout(function(){$location.path("/t/"+data.group.slug+".html")},1e3)}).error(function(data){$scope.step=1,Flash.show({type:"danger",msg:data.flash})}):(Flash.show({type:"danger",msg:"Bạn cần phải chọn phường xã, quận huyện hoặc tọa độ cho địa danh."}),$scope.step=1)}}]).controller("AgentCtrl",["$scope","$timeout","$log","$http","$location","$rootScope","Flash","Domain",function($scope,$timeout,$log,$http,$location,$rootScope,Flash,Domain){return $scope.login=$rootScope.isLogin,$scope.steps=["one","two"],$scope.step=0,$scope.form={},$scope.results=[],$scope.isFirstStep=function(){return 0===$scope.step},$scope.isLastStep=function(){return $scope.step===$scope.steps.length-1},$scope.CurrentStep=function(){return $scope.steps[$scope.step]},$scope.Label=function(){return $scope.isLastStep()?"Đăng ký":"Tiếp theo"},$scope.Previous=function(){$scope.step-=$scope.isFirstStep()?0:1},$scope.Next=function(){$scope.isLastStep()?$scope.submit():$scope.step+=1},$scope.Exist=function(){$scope.form.username.length>2?$http.post(Domain+"/api/user/username",{username:$scope.form.username}).success(function(data){$scope.success=0===data.results.length?!0:!1}):$scope.success=!1},$scope.submit=function(){return $http.post(Domain+"/api/user/agent",$scope.form).success(function(){Flash.show({type:"success",msg:"Bạn đã tạo địa danh thành công."}),$location.path("/")}).error(function(data){$scope.step=1,Flash.show({type:"danger",msg:data.flash})})}}]).controller("TagCtrl",["$scope","$http","$routeParams","TagService","Auth","Domain",function($scope,$http,$routeParams,TagService,Auth,Domain){return $scope.isRealEstate=!0,$scope.isStatus=!0,$scope.user=Auth.user(),$scope.isSwitch=function(arg){return arg&&($scope.isStatus||($scope.isStatus=!0),$scope.isRealEstate||($scope.isRealEstate=!0)),!arg},angular.extend($scope,{position:{coords:{latitude:10.823099,longitude:106.629664}},center:{latitude:0,longitude:0},markers:[],zoom:11,longitude:null,latitude:null}),$http.post(Domain+"/api/tag",{slug:$routeParams.tagId}).success(function(data){$scope.item=data.data,$scope.results=new TagService($scope.item.slug),$scope.stats=data.stats,$scope.item.map&&($scope.center={latitude:parseFloat($scope.item.map[0]),longitude:parseFloat($scope.item.map[1])},$scope.position={coords:{latitude:parseFloat($scope.item.map[0]),longitude:parseFloat($scope.item.map[1])}},$scope.markers.push($scope.center))}).error(function(data,status){404===status&&($scope.item=[])})}]).controller("PostCtrl",["$scope","$http","$routeParams","Auth","Domain",function($scope,$http,$routeParams,Auth,Domain){return angular.extend($scope,{position:{coords:{latitude:10.823099,longitude:106.629664}},center:{latitude:0,longitude:0},markers:[],zoom:15,longitude:null,latitude:null}),$scope.login=Auth.isLoggedIn(),$scope.user=Auth.user(),$scope.submit=function(id){Auth.isLoggedIn()?$http.post(Domain+"/api/comment/create",{msg_id:id,comment:$scope.form.comment}).success(function(data){$scope.item.comments.push(data),$scope.form={}}).error(function(){alert("Bạn phải đăng nhập để sử dụng chức năng này.")}):alert("Bạn phải đăng nhập để sử dụng chức năng này.")},$http.post(Domain+"/api/message/read",{id:$routeParams.postId}).success(function(data){$scope.item=data,$scope.item.meta.map&&($scope.center={latitude:parseFloat($scope.item.meta.map[0]),longitude:parseFloat($scope.item.meta.map[1])},$scope.position={coords:{latitude:parseFloat($scope.item.meta.map[0]),longitude:parseFloat($scope.item.meta.map[1])}},$scope.markers.push($scope.center))
}).error(function(data,status){404===status&&($scope.item=[])})}]).controller("MapCtrl",["$scope",function(){}]).controller("TypeaheadCtrl",["$scope","$http","$timeout","TagService","Domain",function($scope,$http,$timeout,TagService,Domain){return $scope.results=[],$scope.isRealEstate=!0,$scope.isStatus=!0,$scope.isFirst=!0,$scope.isFollow=!0,$scope.busy=!1,$scope.tags=[],angular.extend($scope,{position:{coords:{latitude:10.823099,longitude:106.629664}},center:{latitude:0,longitude:0},markers:[],zoom:11,longitude:null,latitude:null}),$scope.isSwitch=function(arg){return arg&&($scope.isStatus||($scope.isStatus=!0),$scope.isRealEstate||($scope.isRealEstate=!0)),!arg},$scope.focus=function(){$scope.isFollow=!0},$scope.remove=function(index){$scope.tags.splice(index,1),$scope.Tags(),$scope.tags.length<1&&($scope.isFollow=!0,$scope.isFirst=!0,$scope.follows=$scope._follows)},$scope.add=function(k){"undefined"!=typeof k&&($scope.tags.push(k),$scope.isFollow=!1,$scope.isFirst=!1,$scope.newTag="",$scope.Tags()),$scope.tags.length>1&&($scope.item=[])},$scope.search=function(){"undefined"!=typeof $scope.keyword?$timeout(function(){$scope.results=new TagService($scope.keyword)},1e3):$scope.results=[]},$scope.suggests=function(k){k.length>0?($scope.busy=!0,$http.post(Domain+"/api/search/typeahead",{keyword:k}).then(function(response){$scope.follows=response.data,$scope.isFollow=!0,$scope.isFirst=!1,$scope.busy=!1})):($scope.isFollow=!0,$scope.isFirst=!0,$http.post(Domain+"/api/search/follows").success(function(data){$scope.follows=data}))},$http.post(Domain+"/api/search/follows").success(function(data){$scope.follows=data,$scope._follows=data}),$scope.Tags=function(){$scope.item=[],$scope.results=[],$scope.stats=[],$scope.tags.length?($scope.results=new TagService($scope.tags),1===$scope.tags.length&&$http.post(Domain+"/api/search/nero",{keyword:$scope.tags}).success(function(data){$scope.isFollow=!1,$scope.item=data.data,$scope.stats=data.stats,$scope.item.map&&($scope.center={latitude:parseFloat($scope.item.map[0]),longitude:parseFloat($scope.item.map[1])},$scope.position={coords:{latitude:parseFloat($scope.item.map[0]),longitude:parseFloat($scope.item.map[1])}},$scope.markers.push($scope.center))})):$scope.isFirst=!0}}]).controller("ClassifiedCtrl",["$scope","$http","$location","SearchService","Auth","Domain",function($scope,$http,$location,SearchService,Auth,Domain){return $scope.isRealEstate=!0,$scope.isStatus=!0,$scope.user=Auth.user(),$scope.isSwitch=function(arg){return arg&&($scope.isStatus||($scope.isStatus=!0),$scope.isRealEstate||($scope.isRealEstate=!0)),!arg},$scope.results=new SearchService,$http.post(Domain+"/api/stats").success(function(data){$scope.stats=data.stats})}]).controller("ProfileCtrl",["$scope","$http","$routeParams","SearchService","Auth","Domain",function($scope,$http,$routeParams,SearchService,Auth,Domain){return $scope.myInterval=6e4,$scope.isRealEstate=!0,$scope.isStatus=!0,$scope.form={},$scope.user=Auth.user(),$http.post(Domain+"/profile.html",{username:$routeParams.profileId}).success(function(data){$scope.user=data.user,$scope.slides=data.slides,$scope.stats=data.stats,$scope.results=new SearchService({uid:data.user.idu})}),$scope.isSwitch=function(arg){return arg&&($scope.isStatus||($scope.isStatus=!0),$scope.isRealEstate||($scope.isRealEstate=!0)),!arg}}]).controller("SliderCtrl",["$scope","$interval","$http","Domain",function($scope,$interval,$http,Domain){return $scope.slides=[],$http.post(Domain+"/api/slider").success(function(data){$scope.slides=data}),$scope.direction="left",$scope.currentIndex=0,$scope.setSlide=function(index){$scope.currentIndex=index},$scope.isSlide=function(index){return $scope.currentIndex===index},$scope.prev=function(){$scope.direction="left",$scope.currentIndex=$scope.currentIndex<$scope.slides.length-1?++$scope.currentIndex:0},$scope.next=function(){$scope.direction="right",$scope.currentIndex=$scope.currentIndex>0?--$scope.currentIndex:$scope.slides.length-1},$interval(function(){$scope.currentIndex=$scope.currentIndex<$scope.slides.length-1?++$scope.currentIndex:0},5e3)}]).controller("ContactCtrl",["$scope","$http","$location","$timeout","Flash","Domain",function($scope,$http,$location,$timeout,Flash,Domain){return $scope.lastForm={},$scope.form={},$scope.disabled=!1,$scope.submit=function(form){$scope.lastForm=angular.copy(form),$http.post(Domain+"/api/contact",{fullname:$scope.form.fullname,email:$scope.form.email,select:$scope.form.select,message:$scope.form.message}).success(function(data){$scope.disabled=!0,$timeout(function(){$location.path("/index.html")},5e3),Flash.show({type:"success",msg:data.flash})}).error(function(data){Flash.show({type:"danger",msg:data.flash})})},$scope.reset=function(){$scope.form=angular.copy($scope.lastForm)}}]).controller("FollowCtrl",["$scope","$http","Domain",function($scope,$http,Domain){return $http.post(Domain+"/api/follows").success(function(data){$scope.follows=data})}]).controller("CommentsCtrl",["$scope","$http","$routeParams","Auth","Flash","Domain",function($scope,$http,$routeParams,Auth,Flash,Domain){return $scope.form={},$scope.login=Auth.isLoggedIn(),$scope.user=Auth.user(),angular.extend($scope,{position:{coords:{latitude:10.823099,longitude:106.629664}},center:{latitude:0,longitude:0},markers:[],zoom:17,longitude:null,latitude:null}),$scope.submit=function(id){Auth.isLoggedIn()?$http.post("/api/comment/create",{msg_id:id,comment:$scope.form.comment}).success(function(data){$scope.item.comments.push(data),$scope.form={}}).error(function(){alert("Bạn phải đăng nhập để sử dụng chức năng này.")}):alert("Bạn phải đăng nhập để sử dụng chức năng này.")},$http.post(Domain+"/api/message/read",{id:$routeParams.commentId}).success(function(data){$scope.item=data,$scope.item.meta.map&&($scope.center={latitude:parseFloat($scope.item.meta.map[0]),longitude:parseFloat($scope.item.meta.map[1])},$scope.position={coords:{latitude:parseFloat($scope.item.meta.map[0]),longitude:parseFloat($scope.item.meta.map[1])}},$scope.markers.push($scope.center))}).error(function(data,status){404===status&&($scope.item=[])})}]).controller("LoginCtrl",["$scope","$location","$http","$filter","$rootScope","Auth","Flash","Domain",function($scope,$location,$http,$filter,$rootScope,Auth,Flash,Domain){return $scope.steps=["one","two","three","four"],$scope.step=0,$scope.credentials={user:"",password:""},$scope.isFirstStep=function(){return 0===$scope.step},$scope.isLastStep=function(){return $scope.step===$scope.steps.length-1},$scope.CurrentStep=function(){return $scope.steps[$scope.step]},$scope.NextLabel=function(){return $scope.isLastStep()?"Đăng nhập":$scope.isFirstStep()?"Tiếp tục":"Xác nhận"},$scope.Previous=function(){$scope.step=0},$scope.Next=function(){$scope.isFirstStep()?$scope.email_or_phone():$scope.credentials.password.length>3?$scope.login():Flash.show({type:"danger",msg:"Mật khẩu/Mã xác nhận quá ngắn."})},$scope.email_or_phone=function(){$http.post(Domain+"/api/user/status",{user:$scope.credentials.user}).success(function(data){$scope.step=$scope.steps.length-1,$scope.phone="phone"===data.user,$scope.email="email"===data.user,data.flash&&Flash.show({type:"info",msg:data.flash})}).error(function(data,status){404===status?("phone"===data.user?$scope.step=1:"email"===data.user&&($scope.step=2),data.flash&&Flash.show({type:"danger",msg:data.flash})):($scope.step=0,Flash.show({type:"danger",msg:"Email hoặc số điện thoại không hợp lệ."}))})},$scope.resetpw=function(){Auth.sendmail($scope.credentials).error(function(){$scope.step=0})},$scope.login=function(){Auth.login($scope.credentials).success(function(data){data.user.otp?$location.path("/newpassword.html"):$rootScope.isPath?($location.path($rootScope.isPath),$rootScope.isPath=""):$location.path("/index.html")}).error(function(){$scope.step=0})},$scope.$watch("credentials.user",function(){$scope.credentials.user=$filter("tel")($scope.credentials.user)})}]).controller("AccountCtrl",["$scope","$http","$location","$filter","Auth","Flash","Domain",function($scope,$http,$location,$filter,Auth,Flash,Domain){return $scope.phone=!1,$scope.email=!1,$scope.name=!1,$scope.passwd=!1,$scope.user=Auth.user(),$scope.$watch("form.phone",function(){$scope.form.phone=$filter("tel")($scope.form.phone)}),$scope.verify=function(){return $http.post(Domain+"/api/user/verify",$scope.form).success(function(data){Flash.show({type:"success",msg:data.flash}),data.phone&&($scope.phone=!0,$scope.email=!1),data.email&&($scope.phone=!1,$scope.email=!0)}).error(function(data){Flash.show({type:"danger",msg:data.flash})})},$scope.confirm=function(){return $http.post(Domain+"/api/user/confirm",$scope.form).success(function(data){Flash.show({type:"success",msg:data.flash}),Auth.update(data.user),$location.path("/index.html")}).error(function(data){Flash.show({type:"danger",msg:data.flash})})},$scope.submit=function(){Auth.isLoggedIn()?$http.post(Domain+"/api/user/update",$scope.form).success(function(data){Flash.show({type:"success",msg:data.flash}),Auth.update(data.user),$scope.user=Auth.user(),$scope.name=!1}).error(function(data){Flash.show({type:"danger",msg:data.flash}),$scope.user=Auth.user()}):Flash.show({type:"danger",msg:"Bạn chưa đăng nhập, vui lòng đăng nhập."})},$scope.password=function(){Auth.isLoggedIn()?"undefined"!=typeof $scope.form.password&&$scope.form.password.length>=6?$http.post(Domain+"/api/user/update",$scope.form).success(function(data){Flash.show({type:"success",msg:data.flash}),Auth.update(data.user),$scope.passwd=!1}).error(function(data){Flash.show({type:"danger",msg:data.flash})}):Flash.show({type:"danger",msg:"Mật khẩu ít nhất 6 ký tự."}):Flash.show({type:"danger",msg:"Bạn chưa đăng nhập, vui lòng đăng nhập."})}}]).controller("NewPasswordCtrl",["$scope","$http","$location","Auth","Flash","Domain",function($scope,$http,$location,Auth,Flash,Domain){return $scope.update=function(){Auth.isLoggedIn()?"undefined"!=typeof $scope.form.password&&$scope.form.password.length>=6?$http.post(Domain+"/api/user/update",$scope.form).success(function(data){Auth.update(data.user),$location.path("/index.html"),Flash.show({type:"success",msg:data.flash})}).error(function(data){Flash.show({type:"danger",msg:data.flash})}):Flash.show({type:"danger",msg:"Mật khẩu ít nhất 6 ký tự."}):Flash.show({type:"danger",msg:"Bạn chưa đăng nhập, vui lòng đăng nhập."})}}]).controller("CameraCtrl",["$scope","$location","Domain",function($scope,$location,Domain){var destinationType,onDeviceReady,pictureSource,url;return onDeviceReady=function(){var destinationType,pictureSource;navigator.camera&&(pictureSource=navigator.camera.PictureSourceType,destinationType=navigator.camera.DestinationType)},$scope.data={},pictureSource=void 0,destinationType=void 0,url=void 0,document.addEventListener("deviceready",onDeviceReady,!1),$scope.takePicture=function(){var options;options={quality:85,destinationType:destinationType,sourceType:pictureSource,encodingType:0},navigator.camera&&navigator.camera.getPicture(function(imageURI){$scope.mypicture=imageURI},function(){},options)},$scope.update=function(){var ft,options,params,uploadError,uploadSuccess;uploadSuccess=function(){},uploadError=function(){},$scope.data.uploadurl&&$scope.mypicture&&(options=new FileUploadOptions,options.fileKey="file",options.fileName=$scope.mypicture.substr($scope.mypicture.lastIndexOf("/")+1),options.mimeType="image/jpeg",params={},options.params=params,ft=new FileTransfer,ft.upload($scope.mypicture,encodeURI(Domain+"/api/upload"),uploadSuccess,uploadError,options))}}]).animation(".slide-animation",function(){return{addClass:function(element,className,done){var finishPoint,scope;scope=element.scope(),"ng-hide"===className?(finishPoint=element.parent().width(),"right"!==scope.direction&&(finishPoint=-finishPoint),TweenMax.to(element,.5,{left:finishPoint,onComplete:done})):done()},removeClass:function(element,className,done){var scope,startPoint;scope=element.scope(),"ng-hide"===className?(element.removeClass("ng-hide"),startPoint=element.parent().width(),"right"===scope.direction&&(startPoint=-startPoint),TweenMax.set(element,{left:startPoint}),TweenMax.to(element,.5,{left:0,onComplete:done})):done()}}})}.call(this),angular.module("App.templates",["html/agent.html","html/agents.html","html/carousel.html","html/classifieds.html","html/comment.html","html/contact.html","html/flash.html","html/follows.html","html/group.html","html/login.html","html/map.html","html/nav.html","html/newpassword.html","html/notice.html","html/post.html","html/profile.html","html/sale.html","html/search.html","html/share.html","html/slider.html","html/tag.html","html/update.html","html/uploader.html","html/welcome.html"]),angular.module("html/agent.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/agent.html",'<div class=container-fluid ng-controller=AgentCtrl><div id=share><form role=form><div ng-switch=CurrentStep()><div ng-switch-when=one><div class=form-group><div class=controls><p>Đăng ký tài khoản kinh doanh nhà đất nếu bạn là:</p><div><ul><li>Nhà môi giới</li><li>Chủ đầu tư</li></ul></div><p>Nhiều đặc quyền khác khi là Nhà Kinh Doanh Nhà Đất trên nhadat.com:</p><div><ul><li>Trang riêng với hình ảnh, danh hiệu, mục rao riêng của bạn</li><li>Tham gia tạo địa danh để khẳng định uy tín</li><li>Tên miền riêng như tungpmh.nhadat.com</li></ul></div><div class=form-group><input ng-model=form.username class=form-control placeholder=Username...></div></div></div></div><div ng-switch-when=two><p>Giới thiệu tóm tắt lĩnh vực hay địa bàn hoạt động của bạn</p><div class=form-group><textarea ng-model=form.bio class=form-control placeholder="Giới thiệu...">\n					</div>\n					<p>Chúng tôi sẽ liên hệ và thông báo với bạn khi hoàn tất đăng ký.</p>\n					<p>Xin cảm ơn.</p>\n				</div>\n			</div>\n			<div class="form-group btn-share">\n				<div class=pull-right>\n					<a class="btn btn-default btn-medium" ng-click=Previous() ng-show=!isFirstStep()> <i class=icon-arrow-left></i>\n					Trở lại\n					</a>\n					<a class="btn btn-primary btn-medium" ng-click=Next()>\n					{{Label()}} <i class=icon-arrow-right></i>\n					</a>\n				</div>\n			</div>\n			<br class=clearfix>\n		</form>\n	</div>\n</div>')}]),angular.module("html/agents.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/agents.html","<div class=agents ng-show=agent><div class=container><div class=column><div class=one-third><img ng-src={{agent.avatar}} class=image alt=img></div><div class=two-third>{{agent.string}}</div></div></div></div>")}]),angular.module("html/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/carousel.html",'<div class=carousel><ol class=carousel-indicators ng-show="slides.length > 1"><li ng-repeat="slide in slides" ng-class="{\'active\':isSlide($index)}" ng-click=setSlide($index);></li></ol><div class=carousel-inner><div class="item slide-animation" ng-class="{\'active\':isSlide($index)}" ng-repeat="slide in slides" ng-swipe-right=next() ng-swipe-left=prev() ng-hide=!isSlide($index)><a href=http://static.nhadat.com/uploads/media/{{slide}} target=_blank><img class=img-responsive ng-src=http://static.nhadat.com/640/media/{{slide}} alt=""></a><div class=price ng-if=rent ng-bind-html=rent|rentify|unsafe></div><div class=price ng-if=!rent ng-show=price ng-bind-html=price|pricify|unsafe></div></div></div><a class="carousel-control left" ng-click=next() ng-show="slides.length > 1"><span class=icon-prev></span></a> <a class="carousel-control right" ng-click=prev() ng-show="slides.length > 1"><span class=icon-next></span></a></div>')}]),angular.module("html/classifieds.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/classifieds.html",'<div class=classifieds><h5 class="uppercase center">Chọn nội dung hiển thị</h5><div class="column center"><div class=one-half><button class=btn ng-class="{\'active\':isRealEstate}" ng-click="isRealEstate = isSwitch(isRealEstate)"><span class="badge pull-right" ng-bind=stats.realestate></span> Mục rao</button></div><div class=one-half><button class=btn ng-class="{\'active\':isStatus}" ng-click="isStatus = isSwitch(isStatus)"><span class="badge pull-right" ng-bind=stats.status></span> Trao đổi</button></div></div><div infinite-scroll=results.nextPage() infinite-scroll-disabled=results.busy infinite-scroll-distance=1><div class="column content" ng-repeat="item in results.items"><div class="dropdown pull-right"><a class=dropdown-toggle><i class=icon-chevron-down></i></a><ul class=dropdown-menu><li ng-show="user.idu==item.user.id"><a remove={{item.id}}><i class=icon-trash></i> Xóa tin</a></li><li ng-hide="user.idu==item.user.id"><a report={{item.id}}><i class=icon-bug></i> Báo cáo vi phạm</a></li></ul></div><div ng-switch on=item.type><div ng-switch-when=realestate ng-show=isRealEstate><div class=feed><div class=user><a class=pull-left ng-if=!item.user.username go-click=/profile/{{item.user.id}}.html><img ng-src=http://static.nhadat.com/{{item.user.image}} alt=""></a> <a class=pull-left ng-if=item.user.username go-click=/profile/{{item.user.username}}.html><img ng-src=http://static.nhadat.com/{{item.user.image}} alt=""></a><div class=name><div><a ng-if=item.user.username go-click=/profile/{{item.user.username}}.html title={{item.user.name}}><b>{{item.user.name}}</b></a> <a ng-if=!item.user.username go-click=/profile/{{item.user.id}}.html title={{item.user.name}}><b>{{item.user.name}}</b></a></div><div class=datetime>đăng <span ng-show=item.image.length>{{item.image.length}} hình</span> <span ng-show=item.video.length>{{item.video.length}} clip</span> <span ng-show=item.attach.length>{{item.attach.length}} file</span> <span>{{item.time}}</span></div></div></div></div><div class=clearfix><div class="one-half lazy loading" lazy-loading-class=loading lazy-loaded-class=loaded lazy-background="\'http://static.nhadat.com/\'+ item.img"><div class=image><a go-click=/p/{{item.link}}.html><img ng-src=http://static.nhadat.com/blank.gif alt="" class=square></a><div class=tags><a ng-repeat="(tag,name) in item.tag" ng-if=tag class="label btn-tag" go-click=/t/{{tag}}.html>{{name| characters:16}}</a></div><div class=price ng-if=item.meta.rent ng-bind-html=item.meta.rent|rentify|unsafe></div><div class=price ng-if=!item.meta.rent ng-show=item.meta.price ng-bind-html=item.meta.price|pricify|unsafe></div></div></div><div class=one-half><div class=text go-click=/p/{{item.link}}.html><div ng-bind-html=item.text|characters:64|unsafe></div><small class=address ng-show=item.meta.local>{{item.meta.local| characters:48}}</small></div><div class=info><div class=agent><a ng-show=item.user.username go-click=/profile/{{item.user.username}}.html title={{item.user.name}}><img ng-src=http://static.nhadat.com/{{item.user.image}} alt={{item.user.name}}> <b>{{item.user.name}}</b></a> <span ng-show=!item.user.username>{{item.user.name}}</span></div><div class=callsms><a class=btn-call href=tel:{{item.user.phone}}>Gọi</a> <a class=btn-sms href=sms:{{item.user.phone}}>Nhắn tin</a></div></div></div></div></div><div ng-switch-when=status ng-show=isStatus><div class=feed><div class=user><a class=pull-left ng-if=!item.user.username go-click=/profile/{{item.user.id}}.html><img ng-src=http://static.nhadat.com/{{item.user.image}} alt=""></a> <a class=pull-left ng-if=item.user.username go-click=/profile/{{item.user.username}}.html><img ng-src=http://static.nhadat.com/{{item.user.image}} alt=""></a><div class=name><div><a ng-if=item.user.username go-click=/profile/{{item.user.username}}.html title={{item.user.name}}><b>{{item.user.name}}</b></a> <a ng-if=!item.user.username go-click=/profile/{{item.user.id}}.html title={{item.user.name}}><b>{{item.user.name}}</b></a></div><div class=datetime>trao đổi <span ng-show=item.image.length>{{item.image.length}} hình</span> <span ng-show=item.video.length>{{item.video.length}} clip</span> <span ng-show=item.attach.length>{{item.attach.length}} file</span> <span>{{item.time}}</span></div></div></div><div class=image ng-hide ng-if=item.image[0]><a go-click=/c/{{item.link}}.html><img ng-src=http://static.nhadat.com/640/media/{{item.image[0]}} alt={{item.title}}></a></div><div class=video ng-hide ng-if=item.video[0]></div><div class=message ng-bind-html=item.text|words:30|fixbr|bbcode|unsafe go-click=/c/{{item.link}}.html></div><div class=attach ng-hide ng-if=item.attach[0]><div ng-repeat="file in item.attach"><i class=icon-paper-clip></i> <a href=/uploads/media/{{file}} title={{file}} target=_blank>{{file}}</a></div></div><div class=message ng-if=item.tag.length><a ng-repeat="(k,v) in item.tag" class="btn btn-tag" href=/t/{{k}}.html>{{v}}</a></div><div class="column likeshare"><div class=one-third like={{item.id}}><a ng-class="{\'active\':item.social.liked>0}"><i class=icon-thumbs-up></i></a> <span ng-show=item.social.like>{{item.social.like}}</span></div><div class=one-third><a ng-class="{\'active\':item.social.commented>0}" go-click=/c/{{item.link}}.html><i class=icon-comment></i></a> <span ng-show=item.social.comment>{{item.social.comment}}</span></div></div></div></div></div></div><div class=loading ng-show=results.busy></div><div class=center ng-show=results.end><h4>Không tìm thấy kết quả nào khác nữa.</h4></div></div></div>')}]),angular.module("html/comment.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/comment.html",'<div class=column ng-controller=CommentsCtrl><div class="dropdown pull-right"><a class=dropdown-toggle><i class=icon-chevron-down></i></a><ul class=dropdown-menu><li ng-show="user.idu==item.user.id"><a remove={{item.id}}><i class=icon-trash></i> Xóa tin</a></li><li ng-hide="user.idu==item.user.id"><a report={{item.id}}><i class=icon-bug></i> Báo cáo vi phạm</a></li></ul></div><div class=feed><div class=user><a class=pull-left go-click=/profile/{{item.user.username}}.html ng-if=item.user.username><img ng-src={{item.user.image}} alt=""></a> <a class=pull-left ng-if=!item.user.username><img ng-src={{item.user.image}} alt=""></a><div class=name><div><a go-click=/profile/{{item.user.username}}.html ng-if=item.user.username><b>{{item.user.name}}</b></a> <a ng-if=!item.user.username><b>{{item.user.name}}</b></a></div><div class=datetime>trao đổi <span ng-show=item.image.length>{{item.image.length}} hình</span><span ng-show=item.video.length>{{item.video.length}} clip</span><span ng-show=item.attach.length>{{item.attach.length}} file</span><span>{{item.time}}</span></div></div></div><div ng-if=item.image class=image><carousel slides=item.image></carousel></div><div class=tag ng-show=item.tags><a ng-repeat="(k,v) in item.tags" class="btn btn-tag" go-click=/t/{{k}}.html>{{v}}</a></div><div class=message ng-bind-html=item.message|fixbr|bbcode|unsafe></div><div class=tag ng-show=item.meta.local><a ng-repeat="(k,v) in item.meta.local" class="btn btn-tag" go-click=/t/{{k}}.html>{{v}}</a></div><div class=attach ng-hide ng-show=item.attach><div ng-repeat="f in item.attach"><i class=icon-paper-clip></i> <a href=http://static.nhadat.com/uploads/media/{{f}} title={{f}} target=_blank>{{f}}</a></div></div><div class="column likeshare"><div class=one-third like={{item.id}}><a ng-class="{\'active\':item.social.liked>0}"><i class=icon-thumbs-up></i></a> <span ng-show=item.social.like>{{item.social.like}}</span></div><div class=one-third><a ng-class="{\'active\':item.social.commented>0}"><i class=icon-comment></i></a> <span ng-show=item.social.comment>{{item.social.comment}}</span></div></div></div><div class=comments ng-show=item.comments><div class=content><div class=comment ng-repeat="c in item.comments" ng-show=c.name><div ng-bind-html=c.comment|unsafe></div><small class=datetime><span><b>{{c.name}}</b></span> <span ng-show=c.location>{{c.location}}</span> <span ng-show=c.time>{{c.time}}</span></small></div></div></div><div id=share><div class=content><form ng-submit=submit(item.id)><textarea id=comment auto-grow ng-disabled=!login ng-model=form.comment class=form-control rows=3 placeholder="Trao đổi của bạn?"></textarea><div class=submit><div class=media><span class=pull-left><button ng-disabled=!login class="btn btn-primary">Đăng</button></span></div></div></form></div></div></div>')}]),angular.module("html/contact.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/contact.html",'<div class=container-fluid ng-controller=ContactCtrl><div id=contact class=contact><form class=content ng-submit=submit()><h4>Bạn hãy nhập tên và số điện thoại chính xác để chúng tôi có thể trả lời</h4><div class=form-group><input class=form-control name=fullname placeholder="Tên liên hệ" ng-model=form.fullname ng-disabled=disabled required></div><div class=form-group><input class=form-control name=email placeholder="Email hoặc Số điện thoại" ng-model=form.email ng-disabled=disabled required></div><div class=form-group><textarea class=form-control rows=5 placeholder="Nội dung..." ng-model=form.message ng-disabled=disabled required></textarea></div><div class=form-group><label class=control-label>Mục liên hệ</label><select class=form-control multiple ng-model=form.select ng-disabled=disabled required><option value="Liên hệ">Liên hệ</option><option value="Góp ý">Góp ý</option><option value="Báo lỗi">Báo lỗi</option><option value=Khác>Khác</option></select></div><div class=form-group><button ng-disabled=disabled type=submit class="btn btn-primary">Gởi</button></div></form></div></div>')}]),angular.module("html/flash.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/flash.html",'<div class=flash ng-show=flash.msg ng-click="flash.msg = \'\'"><div class="alert alert-dismissable alert-{{flash.type}}"><button type=button class=close>&times;</button> {{flash.msg}}</div></div>')}]),angular.module("html/follows.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/follows.html",'<div class=container-fluid><div class=follows><h5 class=uppercase>ĐƯỢC TÌM KIẾM NHIỀU NHẤT TRÊN GOOGLE:</h5><div class=content><div ng-show=follows.city><h5>Tỉnh thành</h5><p><a ng-repeat="tag in follows.city" class="btn btn-tag" go-click=/t/{{tag.slug}}.html>{{tag.name}}</a></p></div><div ng-show=follows.group><h5>Địa danh</h5><p><a ng-repeat="tag in follows.group" class="btn btn-tag" go-click=/t/{{tag.slug}}.html>{{tag.name}}</a></p></div><div ng-show=follows.topic><h5>Chủ đề</h5><p><a ng-repeat="tag in follows.topic" class="btn btn-tag" go-click=/t/{{tag.slug}}.html>{{tag.name}}</a></p></div></div></div></div>')}]),angular.module("html/group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/group.html",'<div class=container-fluid ng-controller=GroupCtrl><div id=share><form role=form><input type=hidden ng-init="form.tag = ([])"><div ng-switch=CurrentStep()><div ng-switch-when=one><div class=form-group><div class=controls><p>"Địa danh" là cách nhadat.com gọi chung cho:</p><div><ul><li>Dự án, như Khu Quy Hoạch Xi Hàn Quốc</li><li>Khu đô thị, như Khu ĐTM Phú Mỹ Hưng</li><li>Khu nhà ở, như Khu Nhà Ở Nam Long Phước Long B</li><li>Khu căn hộ, như Saigon Pearl, và...</li><li>Các địa danh khác, như Ngã Tư Bảy Hiền, Lăng Cha Cả.</li></ul></div><p>Địa danh không phải là tên hành chính như phường xã, quận huyện, tỉnh thành.</p><p>Hãy tạo địa danh ngay hôm nay và nhận thưởng <b>1,000,000 đồng</b> vào tài khoản nhadat.com của bạn.</p></div></div></div><div ng-switch-when=two><div class=form-group><input ng-model=form.name class=form-control placeholder="Tên gọi tốt nhất"></div><div class=form-group><input ng-model=form.long_name class=form-control placeholder="Các tên gọi khác nhau"><p class=help-block>Xin gọi hết các tên gọi khác của địa danh, cách nhau bằng dấu \',\'.</p></div></div><div ng-switch-when=three><div class=form-group><p>Địa danh của bạn có trùng với các địa danh có sẵn sau đây không?</p><div class=form-group><ul><li ng-repeat="item in items"><div><strong>{{item.name}}</strong></div><div>{{item.long_name}}</div><div><em>{{item.address}}, {{item.local}}</em></div></li><li ng-if="items.length < 1">KHÔNG CÓ ĐỊA DANH NÀO KHÁC.</li></ul></div><p>Nếu không trùng bấm "Tiếp theo" để tạo địa danh. Hoặc có thể bấm "Trở lại" để tạo địa danh khác.</p><p><em>Bạn có biết? Bạn có thể tạo địa danh mới trong địa danh có sẵn, như Mỹ Khánh trong Phú Mỹ Hưng.</em></p></div></div><div ng-switch-when=four><div class=form-group ng-class="{\'has-success\':success}"><div class=input-group><input placeholder="Tên miền của địa danh" class="form-control right" ng-model=form.subdomain ng-change=Domain()> <span class=input-group-addon>.nhadat.com</span></div><p class=control-label ng-show=success>Tên miền {{form.subdomain}}.nhadat.com hợp lệ.</p></div><div class=form-group><p class=help-block>Mỗi địa danh sẽ có tên miền (subdomain) duy nhất và cố định. Bạn có thể sử dụng subdomain này trên Google Maps, Facebook, vv.</p></div></div><div ng-switch-when=five><div class=form-group><input class=form-control ng-model=form.address placeholder="Số nhà, tên đường"></div><div class=form-group><input class=form-control ng-model=form.local1 ng-change=suggests() placeholder="Phường xã, Quận huyện, Tỉnh thành"></div><div class=form-group ng-show=results><div>Xin xác nhận địa chỉ hành chính như sau:</div><div class=loading ng-show=busy></div><div class=location><div class=radio ng-repeat="k in results"><label><input ng-click=gmap(k) type=radio name=local ng-checked="(form.local==k.local)"> {{k.long_name}}</label></div></div></div></div><div ng-switch-when=six><div class=form-group>Xác định vị trí BĐS trên bản đồ</div><div class=form-group><button class="btn btn-primary" ng-click=checkin()>Lấy vị trí hiện tại</button></div><div class=form-group><div id=gmap class=fullscreen><div class=google-map center=center zoom=zoom markers=markers latitude=latitude longitude=longitude mark-click=true draggable fit=false></div></div></div></div><div ng-switch-when=seven><div class=form-group><p>Nhập các từ khóa để mô tả địa danh như: chung cư, căn hộ, chung cư cao cấp, căn hộ cho thuê, cty Nam Long, Phú Mỹ Hưng, vv.</p><p>Sau đó chọn các từ khóa mà hệ thống đề nghị bên dưới</p></div><div class=form-group><input class=form-control ng-model=keywords placeholder="Các từ khóa để mô tả địa danh..." ng-change=Tags(keywords)></div><div ng-show=tags><button ng-repeat="k in tags" class="btn btn-tag" ng-class="{\'active\':form.tag.indexOf(k) > -1}" ng-click=toggle(k)>{{k}}</button></div></div></div><div class="form-group btn-share"><div class=pull-right><a class="btn btn-default btn-medium" ng-click=Previous() ng-show=!isFirstStep()><i class=icon-arrow-left></i> Trở lại</a> <a class="btn btn-primary btn-medium" ng-click=Next()>{{Label()}} <i class=icon-arrow-right></i></a></div></div><br class=clearfix></form></div></div>')}]),angular.module("html/login.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/login.html",'<div class=container-fluid ng-controller=LoginCtrl><div class=join><div class=container-fluid><div class=media><div class=media-body><p>Đăng ký bằng ĐT di động hay email</p></div></div><form role=form><div ng-switch=CurrentStep()><div ng-switch-when=one><div class=form-group><input class=form-control name=email placeholder="Địa chỉ email hoặc số ĐT di dộng ở VN" ng-model=credentials.user required></div><p>Chúng tôi không chia sẻ thông tin của bạn cho bất kỳ ai.</p></div><div ng-switch-when=two><div class=form-group><input class=form-control placeholder="Mã số xác nhận" ng-model=credentials.password required></div><div class=form-group><p>Chúng tôi vừa gửi mã xác nhận đến số điện thoại <b>{{credentials.user|tel}}</b> bằng tin nhắn. Xin kiểm tra tin nhắn và nhập mã xác nhận vào đây. Có thể mất đến vài phút tin nhắn mới đến nơi. Cảm ơn.</p></div></div><div ng-switch-when=three><div class=form-group><input class=form-control placeholder="Mã số xác nhận" ng-model=credentials.password required></div><p>Vui lòng kiểm tra e-mail <b>{{credentials.user|lowercase}}</b> để lấy mã số xác nhận.</p></div><div ng-switch-when=four><div class=form-group><input class=form-control type=password placeholder="Mật khẩu" ng-model=credentials.password required></div><div class=form-group><p class=help-block><div ng-show=phone>Nếu quên hay chưa có mật khẩu, hãy <a ng-click=resetpw()>bấm vào đây để lấy mật khẩu mới</a> qua số điện thoại <b>{{credentials.user}}</b>.</div><div ng-show=email>Nếu quên hay chưa có mật khẩu, hãy <a ng-click=resetpw()>bấm vào đây để lấy mật khẩu mới</a> qua địa chỉ email <b>{{credentials.user}}</b>.</div></p></div></div></div><div class=pull-right><a class="btn btn-default" ng-click=Previous() ng-show=!isFirstStep()><i class=icon-arrow-left></i> Trở lại</a> <a class="btn btn-primary" ng-click=Next()>{{NextLabel()}}</a></div></form></div><div class=clearfix></div></div></div>')
}]),angular.module("html/map.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/map.html","<div ng-controller=MapCtrl><div class=container-fluid><div class=group><div class=address>{{item.meta.address}}</div><div id=gmap class=fullscreen ng-if=item.meta.map><div class=google-map center=position.coords zoom=zoom markers=markers latitude=latitude longitude=longitude mark-click=false draggable fit=false></div></div><div class=clearfix></div></div></div></div>")}]),angular.module("html/nav.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/nav.html",'<nav><ul class=menu><li ng-class="navClass(\'search.html\')"><a go-click=/search.html class=nav-search><div class=text>Tìm kiếm</div></a></li><li ng-class="navClass(\'sale.html\')"><a go-click=/sale.html title="Rao bán" class=nav-sale><div class=text>Rao bán</div></a></li><li ng-class="navClass(\'share.html\')"><a go-click=/share.html title="Tin nhắn" class=nav-msg><div class=text>Trao đổi</div></a></li><li ng-class={active:isMenu}><a ng-click="isMenu = !isMenu" class=nav-menu><div class=text>Menu</div></a></li></ul><div collapse=!isMenu><ul id=nav-menu><li ng-show=isLogin><a go-click=/profile/{{User.username}}.html ng-if=User.username>Xin chào, <b>{{User.first_name}}</b></a> <a go-click=/profile/{{User.idu}}.html ng-if=!User.username>Xin chào, <b>{{User.first_name}}</b></a></li><li ng-show=!isLogin><a go-click=/login.html>Đăng ký</a></li><li ng-show=isLogin><a go-click=/update.html>Cập nhập tài khoản</a></li><li ng-show=isLogin><a go-click=/logout.html ng-click=logout();>Đăng xuất</a></li><li ng-show=isLogin><a go-click=/diadanh.html>Tạo địa danh</a></li><li><a go-click=/contact/index.html>Liên hệ / Góp ý / Báo lỗi</a></li><li><a href=tel:0906773566>Gọi hotline: <b style="color: red">(090) 677 3566</b></a></li></ul></div></nav>')}]),angular.module("html/newpassword.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/newpassword.html",'<div class=container-fluid><div class=contact ng-controller=NewPasswordCtrl><form role=form><br><input type=hidden ng-init="form.current = \'\'"><div class=form-group><div class=input-group><span class=input-group-addon><i class=icon-key></i></span> <input class=form-control type=password placeholder="Đặt mật khẩu mới" ng-model=form.password></div></div><div class=form-group><div class=input-group><span class=input-group-addon><i class=icon-key></i></span> <input class=form-control type=password placeholder="Nhập lại mật khẩu mới" ng-model=form.repassword></div></div><div class=form-group><button class="btn btn-primary" ng-click=update()>Lưu mật khẩu</button></div></form></div></div>')}]),angular.module("html/notice.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/notice.html","<div class=notice ng-show=notice><div class=container>{{notice.text}}</div></div>")}]),angular.module("html/post.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/post.html",'<div ng-controller=PostCtrl><div class=container-fluid><div class=group><div ng-if=item.image><div class=right><div><i>Kéo trái hay phải để xem hình khác.</i></div><div><i>Chạm vào hình để phóng lớn.</i></div></div><div class=image><carousel slides=item.image rent=item.meta.rent price=item.meta.price></carousel></div></div><div ng-hide=item.image class=image><img ng-src={{item.img}} alt=""><div class=price ng-if=item.meta.rent ng-bind-html=item.meta.rent|rentify|unsafe></div><div class=price ng-if=!item.meta.rent ng-show=item.meta.price ng-bind-html=item.meta.price|pricify|unsafe></div></div><div class=attach ng-hide ng-show=item.attach><div ng-repeat="f in item.attach"><i class=icon-paper-clip></i> <a href=http://static.nhadat.com/uploads/media/{{f}} title={{f}} target=_blank>{{f}}</a></div></div><div class=tag ng-show=item.tags><a ng-repeat="(k,v) in item.tags" class="btn btn-tag" go-click=/t/{{k}}.html>{{v}}</a></div><div class=message ng-bind-html=item.message|fixbr|bbcode|unsafe></div><div ng-show=item.meta.local><a ng-repeat="(k,v) in item.meta.local" class="btn btn-tag" go-click=/t/{{k}}.html>{{v}}</a></div><div class=address ng-bind=item.meta.address></div><div id=gmap ng-if=item.meta.map><div class=google-map center=position.coords zoom=zoom markers=markers latitude=latitude longitude=longitude mark-click=false draggable fit=false></div></div><br><div class=datetime><i>Đăng lần đầu {{item.time}}. #{{item.id}}</i></div></div><div class=agents><div class=column><div class=one-half><div class=image><a ng-if=item.user.username go-click=/profile/{{item.user.username}}.html title={{item.user.name}}><img ng-src={{item.user.image}} alt={{item.user.name}}></a> <a ng-if=!item.user.username title={{item.user.name}}><img ng-src={{item.user.image}} alt={{item.user.name}}></a></div></div><div class=two-half><div class=info><div class=name><a ng-if=item.user.username go-click=/profile/{{item.user.username}}.html title={{item.user.name}}>{{item.user.name}}</a> <a ng-if=!item.user.username title={{item.user.name}}>{{item.user.name}}</a><div><small>{{item.user.phone|tel}}</small></div></div><div class=callsms><a class=btn-call href=tel:{{item.user.phone}}>Gọi</a> <a class=btn-sms href=sms:{{item.user.phone}}>Nhắn tin</a></div></div></div></div></div><div class=comments ng-show=item.comments><div class=feed><div class="column likeshare"><div class=one-third like={{item.id}}><a ng-class="{\'active\':item.social.liked>0}"><i class=icon-thumbs-up></i></a> <span ng-show=item.social.like>{{item.social.like}}</span></div><div class=one-third><a ng-class="{\'active\':item.social.commented>0}"><i class=icon-comment></i></a> <span ng-show=item.social.comment>{{item.social.comment}}</span></div></div></div><div class=content><div class=comment ng-repeat="c in item.comments" ng-show=c.name><div ng-bind-html=c.comment|unsafe></div><small class=datetime><span><b>{{c.name}}</b></span> <span ng-show=c.location>{{c.location}}</span> <span ng-show=c.time>{{c.time}}</span></small></div></div></div><div id=share><div class=content><form ng-submit=submit(item.id)><textarea id=comment auto-grow ng-disabled=!login ng-model=form.comment class=form-control rows=3 placeholder="Bình luận của bạn?"></textarea><div class=submit><div class=media><span class=pull-left><button ng-disabled=!login class="btn btn-primary">Đăng</button></span></div></div></form></div></div></div></div>')}]),angular.module("html/profile.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/profile.html",'<div ng-controller=ProfileCtrl><div class=container-fluid><div class=profile><div class=image><img ng-src=http://static.nhadat.com/640/{{user.cover}} alt="{{user.username}} cover"></div><div class=column><div class=one-half><div class=name>{{user.first_name}} {{user.last_name}}</div><img ng-src=http://static.nhadat.com/160/{{user.image}} class=img-responsive alt=""></div><div class=one-half><div class=info ng-show=user.username><a go-click=http://{{user.username}}.nhadat.com title={{user.username}}>{{user.username}}.nhadat.com</a></div><div class=callsms><a class=btn-call href=tel:{{user.phone}}>Gọi</a> <a class=btn-sms href=sms:{{user.phone}}>Nhắn tin</a></div></div></div><div class=bio>{{user.bio}}</div></div></div><slider></slider><classifieds></classifieds></div>')}]),angular.module("html/sale.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/sale.html",'<div id=share ng-controller=SaleCtrl><form role=form><div ng-switch=CurrentStep()><div ng-switch-when=one><div class=content><input type=hidden ng-init="form.type = (\'realestate\')"> <input type=hidden ng-init="form.tag = ([])"><textarea auto-grow ng-disabled=!login ng-model=form.message class=form-control rows=5 placeholder="Cần bán hoặc cho thuê nhà... (rao như cách bạn rao vặt trên báo)" required></textarea><uploader action=/api/upload.html></uploader></div></div><div ng-switch-when=two><div class=form-group><div class=money><input type=number class=form-control ng-maxlength=16 ng-model=form.price placeholder="Giá bán hay giá sang mặt bằng"><div ng-show=form.price>{{form.price|vndong}}</div></div></div><div class=form-group><div class=money><input type=number class=form-control ng-maxlength=16 class=form-control ng-model=form.rent placeholder="Giá thuê mỗi tháng"><div ng-show=form.rent>{{form.rent|vndong}}/tháng</div></div></div><div class=form-group><p>Giá bán cho <em>cả căn</em> (không tính theo m2). Nếu bạn rao cho 1 nhóm sản phẩm, hãy rao giá của căn rẻ nhất.</p><p>Khi sang mặt bằng (sang quán, sang nhà hàng, vv.) xin nhập cả giá chuyển nhượng ban đầu lẫn tiền thuê hàng tháng vào 2 ô ở trên.</p></div></div><div ng-switch-when=three><div class=form-group><input class=form-control ng-model=form.address placeholder="Số nhà, tên đường, khu phố vv"></div><div class=form-group><input class=form-control ng-model=form.local1 ng-change=suggests() placeholder="Địa danh hay Phường xã, Quận huyện,..."></div><div class=form-group ng-show=results><div>Xin xác nhận địa chỉ hành chính như sau:</div><div class=loading ng-show=busy></div><div class=location><div class=radio ng-repeat="k in results"><label><input ng-click=gmap(k) type=radio ng-checked="(form.local==k.local)"> {{k.long_name}}</label></div></div></div></div><div ng-switch-when=four><div class=form-group><div class=media><div class=pull-left>Xác định vị trí BĐS<br>trên bản đồ</div><div class=pull-right><button class="btn btn-primary" ng-click=checkin()>Lấy vị trí hiện tại</button></div></div><div id=gmap class=fullscreen><div class=google-map center=center zoom=zoom markers=markers latitude=latitude longitude=longitude mark-click=true draggable fit=false></div></div></div><div class=form-group><p class=help-block>Xin bấm lên bản đồ để chỉ định vị trí của bất động sản. Bạn có thể chọn đi chọn lại cho đến khi chính xác nhất rồi bấm "Tiếp theo".</p></div></div><div ng-switch-when=five><div class=form-group>Xin hãy chọn những cụm từ mô tả mục rao của bạn:</div><div ng-show=tags><button ng-repeat="k in tags" class="btn btn-tag" ng-class="{\'active\':form.tag.indexOf(k) >\n					-1}" ng-click=toggle(k)>{{k}}</button><div><button ng-click=Tags() class="btn btn-default btn-xs">Thêm nữa...</button></div></div></div><div ng-switch-when=six><div class=flash><div class="alert alert-info">Xem trước và xác nhận trước khi đăng tin. Để sửa đổi bấm nút "Trở lại" ở cuối trang.</div></div><div class=form-group><div ng-hide ng-show=form.images class=image><carousel slides=form.images rent=form.rent price=form.price></carousel></div></div><div class=group><div class=form-group><div class=message ng-bind-html=form.message|unsafe></div></div><div class=form-group><div ng-show=tags><button ng-repeat="k in form.tag" class="btn btn-tag">{{k}}</button></div><div class=address><div>{{form.address}}</div></div><div id=gmap ng-hide ng-show=map><div class=google-map center=center zoom=zoom markers=markers latitude=latitude longitude=longitude mark-click=false draggable fit=false></div></div></div></div></div></div><div class="form-group btn-share"><div class=pull-right><a class="btn btn-default btn-medium" ng-click=Previous() ng-show=!isFirstStep()><i class=icon-arrow-left></i> Trở lại</a> <a class="btn btn-primary btn-medium" ng-click=Next()>{{Label()}} <i class=icon-arrow-right></i></a></div></div><br class=clearfix></form></div>')}]),angular.module("html/search.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/search.html",'<div ng-controller=TypeaheadCtrl><div class=search><form><div class=ngTags tabindex=-1><div class=tags><ul class=tag-list><li class=tag-item ng-repeat="tag in tags"><span>{{tag.text}}</span> <button type=button ng-click=remove($index)>×</button></li></ul><input placeholder="Địa danh, chủ đề hay từ bất kỳ..." class=tag-input ng-focus=focus() ng-model=newTag ng-change=suggests(newTag) ti-autosize=""></div></div><div class=loading ng-show=busy></div></form><div class=container ng-show=isFirst><p>Tìm kiếm như Google!</p><p>Bạn đánh một vài chữ và nhadat.com sẽ hiểu bạn đang tìm gì. Ví dụ:</p><ul><li>Đánh "Bot" rồi chọn "Botanic Tower", hay</li><li>Đánh "Hai" rồi chọn "Hải Phòng", hay</li><li>Đánh "Ben" rồi chọn "P Bến Nghé, Q1", hay</li><li>Đánh "nha" rồi chọn "cho thuê nhà trọ", hay</li><li>Đánh "1 ti" rồi chọn "dưới 1 tỉ đ"</li></ul></div><div class=container-fluid ng-show=follows><div class=follows ng-show=isFollow><h5 ng-hide=isFirst>Tìm thấy <span><b>{{follows.group.length}}</b> địa danh</span><span><b>{{follows.city.length}}</b> tỉnh thành</span><span><b>{{follows.district.length}}</b> quận huyện</span><span><b>{{follows.zipcode.length}}</b> phường xã</span><span><b>{{follows.topic.length}}</b> chủ đề</span></h5><h5 ng-show=isFirst class=uppercase>ĐƯỢC TÌM KIẾM NHIỀU NHẤT TRÊN GOOGLE:</h5><div class=content><div ng-show=follows.group><h5>Địa danh</h5><p><a ng-repeat="t in follows.group" class="btn btn-tag" ng-click=add(t)>{{t.text}}</a></p></div><div ng-show=follows.city><h5>Tỉnh thành</h5><p><a ng-repeat="t in follows.city" class="btn btn-tag" ng-click=add(t)>{{t.text}}</a></p></div><div ng-show=follows.district><h5>Quận huyện</h5><p><a ng-repeat="t in follows.district" class="btn btn-tag" ng-click=add(t)>{{t.text}}</a></p></div><div ng-show=follows.zipcode><h5>Phường xã</h5><p><a ng-repeat="t in follows.zipcode" class="btn btn-tag" ng-click=add(t)>{{t.text}}</a></p></div><div ng-show=follows.topic><h5>Chủ đề</h5><p><a ng-repeat="t in follows.topic" class="btn btn-tag" ng-click=add(t)>{{t.text}}</a></p></div></div></div></div></div><div class=group ng-show=item><div class=container-fluid><div ng-switch on=item.type><div class=map-marker ng-switch-when=city><i class=vietnam></i></div><div class=map-marker ng-switch-when=group><i class=icon-map-marker></i></div><div class=map-marker ng-switch-when=topic><i class=icon-key></i></div></div><h1>{{item.name}}</h1><p ng-if=item.long_name ng-bind-html=item.long_name|unsafe></p><div class="by center" ng-if=item.by_name><em>Địa danh được tạo đầu tiên bởi {{item.by_name}}.</em> </div><div class=tag ng-show=item.tags><a ng-repeat="(k,v) in item.tags" class="btn btn-tag" go-click=/t/{{k}}.html>{{v}}</a></div><div class=like follow={{item.slug}}><a ng-class="{\'active\':item.followed}"><i class=icon-thumbs-up></i></a>{{item.follows}} theo dõi</div><div class=tag ng-show=item.locals><a ng-repeat="(k,v) in item.locals" class="btn btn-tag" go-click=/t/{{k}}.html>{{v}}</a></div><div class=address ng-if=item.local><span ng-if=item.address>{{item.address}},</span>{{item.local}}</div><div id=gmap ng-if=item.map><div class=google-map center=position.coords zoom=zoom markers=markers latitude=latitude longitude=longitude events=events mark-click=false draggable fit=true></div></div></div></div><div ng-show=results><classifieds></classifieds></div></div>')}]),angular.module("html/share.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/share.html",'<div id=share ng-controller=ShareCtrl><form role=form><div ng-switch=CurrentStep()><div ng-switch-when=one><div class="content row"><input type=hidden ng-init="form.type = (\'status\')"> <input type=hidden ng-init="form.tag = ([])"><textarea auto-grow ng-disabled=!login ng-model=form.message class=form-control rows=5 placeholder="Chia sẻ suy nghĩ, hình ảnh, hay thông tin bạn có về 1 địa danh hay 1 chủ đề sôi động của thị trường"></textarea><uploader action=/api/upload.html></uploader></div><div class="form-group row">Nhớ kèm các từ khóa quan trọng (như Villa HQ, biệt thự, vv) trong mô tả để nhadat.com có thể đề nghị từ khóa dễ dàng nhất.</div></div><div ng-switch-when=two><div class=form-group>Xin hãy chọn những cụm từ mô tả mục trao đổi của bạn:</div><div ng-show=tags><button ng-repeat="k in tags" class="btn btn-tag" ng-class="{\'active\':form.tag.indexOf(k) > -1}" ng-click=toggle(k)>{{k}}</button><div><button ng-click=Tags() class="btn btn-default btn-xs">Xem thêm...</button></div></div><div class=form-group>Để nhadat.com tìm được nhiều cụm từ phù hợp hơn xin hãy bấm "Trở lại" và mô tả chi tiết hơn.</div></div></div></form><div class="form-group btn-share"><div class=pull-right><a class="btn btn-default btn-medium" ng-click=Previous() ng-show=!isFirstStep()><i class=icon-arrow-left></i> Trở lại</a> <a class="btn btn-primary btn-medium" ng-click=Next()>{{Label()}} <i class=icon-arrow-right></i></a></div></div><br class=clearfix></div>')}]),angular.module("html/slider.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/slider.html",'<div class=slider><div class="content carousel"><ol class=carousel-indicators ng-show="slides.length > 1"><li ng-repeat="item in slides" ng-class="{\'active\':isSlide($index)}" ng-click=setSlide($index);></li></ol><div class=carousel-inner><div class="item slide-animation" ng-class="{\'active\':isSlide($index)}" ng-repeat="item in slides" ng-swipe-right=next() ng-swipe-left=prev() ng-hide=!isSlide($index)><a go-click=/{{item.type}}/{{item.id}}.html><img class=img-responsive ng-src=http://static.nhadat.com/640/media/{{item.img}} alt=""></a><div class=price ng-if=item.meta.rent ng-bind-html=item.meta.rent|rentify|unsafe></div><div class=price ng-if=!item.meta.rent ng-show=item.meta.price ng-bind-html=item.meta.price|pricify|unsafe></div></div></div><a class="carousel-control left" ng-click=prev() ng-show="slides.length > 1"><span class=icon-prev></span></a> <a class="carousel-control right" ng-click=next() ng-show="slides.length > 1"><span class=icon-next></span></a></div></div>')}]),angular.module("html/tag.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/tag.html",'<div ng-controller=TagCtrl><div class=group><div class=container-fluid><div ng-switch on=item.type><div class=map-marker ng-switch-when=city><i class=vietnam></i></div><div class=map-marker ng-switch-when=group><i class=icon-map-marker></i></div><div class=map-marker ng-switch-when=topic><i class=icon-key></i></div></div><h1>{{item.name}}</h1><p ng-if=item.long_name ng-bind-html=item.long_name|unsafe></p><div class="by center" ng-if=item.by_name><em>Địa danh được tạo đầu tiên bởi {{item.by_name}}.</em> </div><div class=tag ng-show=item.tags><a ng-repeat="(k,v) in item.tags" class="btn btn-tag" go-click=/t/{{k}}.html>{{v}}</a></div><div class=like follow={{item.slug}}><a ng-class="{\'active\':item.followed}"><i class=icon-thumbs-up></i></a>{{item.follows}} theo dõi</div><div class=tag ng-show=item.locals><a ng-repeat="(k,v) in item.locals" class="btn btn-tag" go-click=/t/{{k}}.html>{{v}}</a></div><div class=address ng-if=item.local><span ng-if=item.address>{{item.address}},</span>{{item.local}}</div><div id=gmap ng-if=item.map><div class=google-map center=position.coords zoom=zoom markers=markers latitude=latitude longitude=longitude events=events mark-click=false draggable fit=true></div></div></div></div><classifieds></classifieds></div>')}]),angular.module("html/update.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/update.html",'<div class=container-fluid><div class=contact ng-controller=AccountCtrl><form role=form><div class=form-group><br><p><span ng-if=user.first_name><b>{{user.first_name}}</b></span><span ng-if=!user.first_name>Chưa đăng ký tên.</span> <button class="btn btn-default btn-xs" ng-click="name=!name"><i class=icon-pencil></i></button></p><div ng-show=name><div class=input-group><input class=form-control placeholder=Tên... ng-model=form.first_name ng-init="form.first_name = user.first_name"> <span class=input-group-btn><button class="btn btn-primary" type=button ng-click=submit()><i class=icon-arrow-right></i></button></span></div></div></div><div class=form-group><p><span ng-if=user.email>{{user.email}}</span><span ng-if=!user.email>Chưa đăng ký địa chỉ email.</span> <button class="btn btn-default btn-xs" ng-click="editemail=!editemail; form.email = \'\'; email = false;"><i class=icon-pencil></i></button></p><div ng-show=editemail><div class=input-group ng-show=!email><input class=form-control placeholder="Thay thế/đăng ký địa chỉ email mới" ng-model=form.email> <span class=input-group-btn><button class="btn btn-primary" type=button ng-click=verify()><i class=icon-arrow-right></i></button></span></div><div ng-show=email><div class=input-group><input class=form-control placeholder="Mã xác nhận" ng-model=form.otp> <span class=input-group-btn><button class="btn btn-primary" type=button ng-click=confirm()><i class=icon-arrow-right></i></button></span></div><p>Vui lòng kiểm tra e-mail <b>{{form.email|lowercase}}</b> để lấy mã số xác nhận. Chỉ khi nào bạn xác nhận xong thì việc đăng ký/thay đổi email mới hoàn tất.</p></div></div></div><div class=form-group><p><span ng-if=user.phone>{{user.phone|tel}}</span><span ng-if=!user.phone>Chưa đăng ký số điện thoại.</span> <button class="btn btn-default btn-xs" ng-click="editphone=!editphone; form.phone = \'\'; phone = false;"><i class=icon-pencil></i></button></p><div ng-show=editphone><div class=input-group ng-show=!phone><input class=form-control placeholder="Thay thế/đăng ký số điện thoại mới" ng-model=form.phone> <span class=input-group-btn><button class="btn btn-primary" type=button ng-click=verify()><i class=icon-arrow-right></i></button></span></div><div ng-show=phone><div class=input-group><input class=form-control placeholder="Mã xác nhận" ng-model=form.otp> <span class=input-group-btn><button class="btn btn-primary" type=button ng-click=confirm()><i class=icon-arrow-right></i></button></span></div><p>Vui lòng kiểm tra tin nhắn bằng số điện thoại <b>{{form.phone}}</b> để lấy mã số xác nhận. Chỉ khi nào bạn xác nhận xong thì việc đăng ký/thay đổi số điện thoại mới hoàn tất.</p></div></div></div><hr><div class=form-group><label class=control-label><button class="btn btn-default btn-xs" ng-click="passwd=!passwd"><i class=icon-key></i> Đổi mật khẩu</button></label></div><div ng-show=passwd><div class=form-group><div class=input-group><span class=input-group-addon><i class=icon-key></i></span> <input class=form-control type=password placeholder="Mật khẩu hiện tại" ng-model=form.current></div></div><div class=form-group><div class=input-group><span class=input-group-addon><i class=icon-key></i></span> <input class=form-control type=password placeholder="Mật khẩu mới" ng-model=form.password></div></div><div class=form-group><div class=input-group><span class=input-group-addon><i class=icon-key></i></span> <input class=form-control type=password placeholder="Mật khẩu mới lần nữa" ng-model=form.repassword></div></div><div class=form-group><button class="btn btn-primary" ng-click=password()><i class=icon-save></i> Đổi mật khẩu</button></div></div></form></div></div>')}]),angular.module("html/uploader.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/uploader.html",'<div class=submit><div class=media><input multiple type=file ng-hide=true name=uploader[] onchange=angular.element(this).scope().sendFile(this)> <a class="pull-left upload"><i class=icon-picture></i></a> <a class="pull-left upload"><i class=icon-paper-clip></i></a> </div><div class=progress ng-show="progress!=0"><div class=bar style=width:{{progress}}%></div></div></div><div class=thumbs><div ng-repeat="item in images" class=thumb><img ng-src=http://static.nhadat.com/100/media/{{item|thumb}} alt=""> <a ng-click=remove($index)><i class=icon-remove></i></a></div></div>')}]),angular.module("html/welcome.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("html/welcome.html","<slider ng-controller=SliderCtrl></slider><agent></agent><notice></notice><follows ng-controller=FollowCtrl></follows><classifieds ng-controller=ClassifiedCtrl></classifieds>")}]);